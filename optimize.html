<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Optimization &mdash; pyalacarte 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="pyalacarte 0.1 documentation" href="index.html" />
    <link rel="next" title="Utilities" href="utils.html" />
    <link rel="prev" title="Regression" href="regression.html" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head>
  <body role="document">

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="utils.html" title="Utilities"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="regression.html" title="Regression"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyalacarte 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="optimization">
<h1>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">scipy.optimize</th>
<th class="head">NLopt</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Nelder-Mead</td>
<td>LN_NELDERMEAD</td>
</tr>
<tr class="row-odd"><td>Powell</td>
<td>?</td>
</tr>
<tr class="row-even"><td>CG</td>
<td>?</td>
</tr>
<tr class="row-odd"><td>BFGS</td>
<td>LD_LBFGS</td>
</tr>
<tr class="row-even"><td>Newton-CG</td>
<td><div class="first last line-block">
<div class="line"><strong>LD_TNEWTON_PRECOND_RESTART</strong></div>
<div class="line">LD_TNEWTON_PRECOND</div>
<div class="line">LD_TNEWTON_RESTART</div>
<div class="line">LD_TNEWTON</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>L-BFGS-B</td>
<td>LD_LBFGS</td>
</tr>
<tr class="row-even"><td>TNC</td>
<td><div class="first last line-block">
<div class="line"><strong>LD_TNEWTON_PRECOND_RESTART</strong></div>
<div class="line">LD_TNEWTON_PRECOND</div>
<div class="line">LD_TNEWTON_RESTART</div>
<div class="line">LD_TNEWTON</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>COBYLA</td>
<td>LN_COBYLA</td>
</tr>
<tr class="row-even"><td>SLSQP</td>
<td>LD_SLSQP</td>
</tr>
<tr class="row-odd"><td>dogleg</td>
<td><em>Requires second-order gradients</em></td>
</tr>
<tr class="row-even"><td>trust-ncg</td>
<td><em>Requires second-order gradients</em></td>
</tr>
</tbody>
</table>
<span class="target" id="module-pyalacarte.optimize"></span><p>The <a class="reference internal" href="#module-pyalacarte.optimize" title="pyalacarte.optimize"><code class="xref py py-mod docutils literal"><span class="pre">pyalacarte.optimize</span></code></a> module provides a standardized interface to
popular optimization libraries and tools, such as NLopt and <code class="docutils literal"><span class="pre">scipy.optimize</span></code>,
and also supports custom optimization methods.</p>
<dl class="function">
<dt id="pyalacarte.optimize.sgd">
<code class="descclassname">pyalacarte.optimize.</code><code class="descname">sgd</code><span class="sig-paren">(</span><em>fun</em>, <em>x0</em>, <em>Data</em>, <em>args=()</em>, <em>bounds=None</em>, <em>batchsize=100</em>, <em>rate=0.9</em>, <em>eta=1e-05</em>, <em>gtol=0.001</em>, <em>passes=10</em>, <em>eval_obj=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalacarte.optimize.sgd" title="Permalink to this definition">¶</a></dt>
<dd><p>Stochastic Gradient Descent, using ADADELTA for setting the learning
rate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fun</strong> &#8211; the function to evaluate, this must have the signature
<cite>[obj,] grad = fun(x, Data, ...)</cite>, where the <cite>eval_obj</cite>
argument tells <cite>sgd</cite> if an objective function value is going to
be returned by <cite>fun</cite>.</li>
<li><strong>x0</strong> &#8211; a sequence/1D array of initial values for the parameters to
learn.</li>
<li><strong>Data</strong> &#8211; a numpy array or sequence of data to input into <cite>fun</cite>. This
will be split along the first axis (axis=0), and then input
into <cite>fun</cite>.</li>
<li><strong>args</strong> &#8211; an optional sequence of arguments to give to fun.</li>
<li><strong>bounds</strong> &#8211; sequence, optional. Bounds for variables, (min, max) pairs
for each element in x, defining the bounds on that parameter.
Use None for one of min or max when there is no bound in that
direction.</li>
<li><strong>batchsize</strong> &#8211; (int), optional. The number of observations in an SGD
batch.</li>
<li><strong>rate,</strong> (<em>float</em>) &#8211; ADADELTA smoothing/decay rate parameter, must be [0,
1].</li>
<li><strong>eta,</strong> (<em>float</em>) &#8211; ADADELTA &#8220;jitter&#8221; term to ensure continued learning
(should be small).</li>
<li><strong>gtol,</strong> (<em>float</em>) &#8211; optional. The norm of the gradient of x that will
trigger a convergence condition.</li>
<li><strong>passes,</strong> (<em>int</em>) &#8211; Number of complete passes through the data before
optimization terminates (unless it converges first).</li>
<li><strong>eval_obj,</strong> (<em>bool</em>) &#8211; optional. This indicates whether or not <cite>fun</cite>
also evaluates and returns the objective function value. If
this is true, <cite>fun</cite> must return <cite>(obj, grad)</cite> and then a list
of objective function values is also returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>with members:</p>
<p>&#8216;x&#8217; (array): the final result
&#8216;norms&#8217; (list): the list of gradient norms
&#8216;message&#8217; (str): the convergence condition (&#8216;converge&#8217; or</p>
<blockquote>
<div><p>&#8216;maxiter&#8217;)</p>
</div></blockquote>
<dl class="docutils">
<dt>&#8216;objs&#8217; (list): the list of objective function evaluations of</dt>
<dd><p class="first last"><cite>eval_obj</cite> is True.</p>
</dd>
<dt>&#8216;fun&#8217; (float): the final objective function evaluation if</dt>
<dd><p class="first last"><cite>eval_obj</cite> is True.</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(dict)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyalacarte.optimize.minimize">
<code class="descclassname">pyalacarte.optimize.</code><code class="descname">minimize</code><span class="sig-paren">(</span><em>fun</em>, <em>x0</em>, <em>args=()</em>, <em>method=None</em>, <em>jac=True</em>, <em>bounds=None</em>, <em>constraints=[]</em>, <em>backend='scipy'</em>, <em>**options</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalacarte.optimize.minimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Scipy.optimize.minimize-style wrapper for NLopt and scipy&#8217;s minimize.</p>
<blockquote>
<div><dl class="docutils">
<dt>Arguments:</dt>
<dd><p class="first">fun: callable, Objective function.
x0: ndarray, Initial guess.
args, (tuple): optional, Extra arguments passed to the objective</p>
<blockquote>
<div>function and its derivatives (Jacobian).</div></blockquote>
<dl class="last docutils">
<dt>method, (int), a value from nlopt.SOME_METHOD (e.g.</dt>
<dd>nlopt.NL_BOBYQA). if None, nlopt.NL_BOBYQA is used.</dd>
<dt>bounds: sequence, optional. Bounds for variables, (min, max) pairs</dt>
<dd>for each element in x, defining the bounds on that parameter.
Use None for one of min or max when there is no bound in that
direction.</dd>
<dt>ftol, (float): optional. Relative difference of objective function</dt>
<dd>between subsequent iterations before termination.</dd>
<dt>xtol, (float): optional. Relative difference between values, x,</dt>
<dd>between subsequent iterations before termination.</dd>
<dt>maxiter, (int): optional. Maximum number of function evaluations</dt>
<dd>before termination.</dd>
<dt>jac: if using a scipy.optimize.minimize, choose whether or not to</dt>
<dd>you will be providing gradients or if they should be calculated
numerically. Otherwise ignored for NLopt.</dd>
</dl>
</dd>
<dt>Returns:</dt>
<dd><p class="first">x, (ndarray): The solution of the optimization.
success, (bool): Whether or not the optimizer exited successfully.
message, (str): Description of the cause of the termination (see</p>
<blockquote>
<div>NLopts documentation for codes).</div></blockquote>
<p class="last">fun, (float): Final value of objective function.</p>
</dd>
</dl>
</div></blockquote>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">rosen</span><span class="p">,</span> <span class="n">rosen_der</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">0.875</span><span class="p">,</span>  <span class="mf">0.75</span> <span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">minimize</span><span class="p">(</span><span class="n">rosen</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">&#39;LD_LBFGS&#39;</span><span class="p">,</span> <span class="n">jac</span><span class="o">=</span><span class="n">rosen_der</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="s">&#39;nlopt&#39;</span><span class="p">)</span>
<span class="gp">... </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">minimize</span><span class="p">(</span><span class="n">rosen</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">&#39;L-BFGS-B&#39;</span><span class="p">,</span> <span class="n">jac</span><span class="o">=</span><span class="n">rosen_der</span><span class="p">)</span> 
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyalacarte.optimize.minimize_bounded_start">
<code class="descclassname">pyalacarte.optimize.</code><code class="descname">minimize_bounded_start</code><span class="sig-paren">(</span><em>candidates_func=&lt;function candidate_start_points_random&gt;</em>, <em>*candidates_func_args</em>, <em>**candidates_func_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalacarte.optimize.minimize_bounded_start" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">minimize</span> <span class="k">as</span> <span class="n">sp_min</span><span class="p">,</span> <span class="n">rosen</span><span class="p">,</span> <span class="n">rosen_der</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nd">@minimize_bounded_start</span><span class="p">(</span><span class="n">n_candidates</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">my_min</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">sp_min</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rect</span> <span class="o">=</span> <span class="p">[(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-.</span><span class="mi">5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">my_min</span><span class="p">(</span><span class="n">rosen</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">&#39;L-BFGS-B&#39;</span><span class="p">,</span> <span class="n">jac</span><span class="o">=</span><span class="n">rosen_der</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">1.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">]))</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">fun</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">start</span> 
<span class="go">array([ 0.97,  0.96])</span>
</pre></div>
</div>
<p>There are several other ways to use this decorator:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nd">@minimize_bounded_start</span><span class="p">()</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">my_min</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">sp_min</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">my_min</span><span class="p">(</span><span class="n">rosen</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">&#39;L-BFGS-B&#39;</span><span class="p">,</span> <span class="n">jac</span><span class="o">=</span><span class="n">rosen_der</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">minimize_bounded_start_dec</span> <span class="o">=</span> <span class="n">minimize_bounded_start</span><span class="p">(</span><span class="n">n_candidates</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nd">@minimize_bounded_start_dec</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">my_min</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">sp_min</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">my_min</span><span class="p">(</span><span class="n">rosen</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">&#39;L-BFGS-B&#39;</span><span class="p">,</span> <span class="n">jac</span><span class="o">=</span><span class="n">rosen_der</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_min</span> <span class="o">=</span> <span class="n">minimize_bounded_start_dec</span><span class="p">(</span><span class="n">sp_min</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">my_min</span><span class="p">(</span><span class="n">rosen</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">&#39;L-BFGS-B&#39;</span><span class="p">,</span> <span class="n">jac</span><span class="o">=</span><span class="n">rosen_der</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nd">@minimize_bounded_start</span><span class="p">(</span><span class="n">candidate_start_points_grid</span><span class="p">,</span> <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">my_min</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">sp_min</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">my_min</span><span class="p">(</span><span class="n">rosen</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">&#39;L-BFGS-B&#39;</span><span class="p">,</span> <span class="n">jac</span><span class="o">=</span><span class="n">rosen_der</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">start</span>
<span class="go">array([ 0.875,  0.75 ])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">minimize_bounded_start_dec</span> <span class="o">=</span> <span class="n">minimize_bounded_start</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">candidate_start_points_grid</span><span class="p">,</span> <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_min</span> <span class="o">=</span> <span class="n">minimize_bounded_start_dec</span><span class="p">(</span><span class="n">sp_min</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">my_min</span><span class="p">(</span><span class="n">rosen</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">&#39;L-BFGS-B&#39;</span><span class="p">,</span> <span class="n">jac</span><span class="o">=</span><span class="n">rosen_der</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">start</span>
<span class="go">array([ 0.875,  0.75 ])</span>
</pre></div>
</div>
<p>Just to confirm this is the correct starting point:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidates</span> <span class="o">=</span> <span class="n">candidate_start_points_grid</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">candidates</span><span class="p">[:,</span> <span class="n">rosen</span><span class="p">(</span><span class="n">candidates</span><span class="p">)</span><span class="o">.</span><span class="n">argmin</span><span class="p">()]</span>
<span class="go">array([ 0.875,  0.75 ])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyalacarte.optimize.candidate_start_points_grid">
<code class="descclassname">pyalacarte.optimize.</code><code class="descname">candidate_start_points_grid</code><span class="sig-paren">(</span><em>bounds</em>, <em>nums=3</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalacarte.optimize.candidate_start_points_grid" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_grid</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span> <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">array([[-1.   , -0.375,  0.25 ,  0.875,  1.5  , -1.   , -0.375,  0.25 ,</span>
<span class="go">         0.875,  1.5  , -1.   , -0.375,  0.25 ,  0.875,  1.5  ],</span>
<span class="go">       [-1.5  , -1.5  , -1.5  , -1.5  , -1.5  ,  0.75 ,  0.75 ,  0.75 ,</span>
<span class="go">         0.75 ,  0.75 ,  3.   ,  3.   ,  3.   ,  3.   ,  3.   ]])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_grid</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span> <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(2, 15)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_grid</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)],</span>
<span class="gp">... </span>                            <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span> 
<span class="go">array([[-1.   , -1.   , -1.   , ...,  1.5  ,  1.5  ,  1.5  ],</span>
<span class="go">       [-1.5  , -1.5  , -1.5  , ...,  3.   ,  3.   ,  3.   ],</span>
<span class="go">       [ 0.   ,  0.625,  1.25 , ...,  3.75 ,  4.375,  5.   ]])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_grid</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)],</span>
<span class="gp">... </span>                            <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(3, 450)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_grid</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)],</span>
<span class="gp">... </span>                            <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> 
<span class="go">array([[-1. , -1. , -1. , ...,  1.5,  1.5,  1.5],</span>
<span class="go">       [-1.5, -1.5, -1.5, ...,  3. ,  3. ,  3. ],</span>
<span class="go">       [ 0. ,  0. ,  0. , ...,  5. ,  5. ,  5. ],</span>
<span class="go">       [ 1. ,  3. ,  5. , ...,  1. ,  3. ,  5. ]])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_grid</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)],</span>
<span class="gp">... </span>                            <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(4, 1350)</span>
</pre></div>
</div>
<p>Third <code class="docutils literal"><span class="pre">num</span></code> is ignored</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_grid</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span> <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="go">array([[-1.   , -0.375,  0.25 ,  0.875,  1.5  , -1.   , -0.375,  0.25 ,</span>
<span class="go">         0.875,  1.5  , -1.   , -0.375,  0.25 ,  0.875,  1.5  ],</span>
<span class="go">       [-1.5  , -1.5  , -1.5  , -1.5  , -1.5  ,  0.75 ,  0.75 ,  0.75 ,</span>
<span class="go">         0.75 ,  0.75 ,  3.   ,  3.   ,  3.   ,  3.   ,  3.   ]])</span>
</pre></div>
</div>
<p>Third bound is ignored</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_grid</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)],</span> <span class="n">nums</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">array([[-1.   , -0.375,  0.25 ,  0.875,  1.5  , -1.   , -0.375,  0.25 ,</span>
<span class="go">         0.875,  1.5  , -1.   , -0.375,  0.25 ,  0.875,  1.5  ],</span>
<span class="go">       [-1.5  , -1.5  , -1.5  , -1.5  , -1.5  ,  0.75 ,  0.75 ,  0.75 ,</span>
<span class="go">         0.75 ,  0.75 ,  3.   ,  3.   ,  3.   ,  3.   ,  3.   ]])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_grid</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(2, 9)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_grid</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span> <span class="n">nums</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(2, 81)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_grid</span><span class="p">([(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)],</span> <span class="n">nums</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(3, 8)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyalacarte.optimize.candidate_start_points_random">
<code class="descclassname">pyalacarte.optimize.</code><code class="descname">candidate_start_points_random</code><span class="sig-paren">(</span><em>bounds</em>, <em>n_candidates=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#pyalacarte.optimize.candidate_start_points_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Randomly generate candidate starting points uniformly within a
hyperrectangle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>bounds</strong> (<em>list of tuples (pairs)</em>) &#8211; List of one or more bound pairs</li>
<li><strong>n_candidates</strong> (<em>int</em>) &#8211; Number of candidate starting points to generate</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Array of shape (len(bounds), n_candidates)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">lambda</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">n_candidates</span><span class="o">=</span><span class="mi">100</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">*</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">bounds</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">n_candidates</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">)))</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_random</span><span class="p">([(</span><span class="o">-</span><span class="mf">10.</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">)],</span>
<span class="gp">... </span>    <span class="n">n_candidates</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">... </span>
<span class="go">array([[-7.7165118 , -8.35534484, -3.625521  , -4.02359491, -4.82233003],</span>
<span class="go">       [ 0.9498959 , -0.37492893,  0.16908869, -0.78321786,  1.40738975]])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points</span> <span class="o">=</span> <span class="n">candidate_start_points_random</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[(</span><span class="o">-</span><span class="mf">10.</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">)])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(2, 1000)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span> <span class="o">&lt;=</span> <span class="n">candidate_start_points</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">candidate_start_points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">3.5</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="o">-</span><span class="mf">1.</span> <span class="o">&lt;</span> <span class="n">candidate_start_points</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">candidate_start_points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mf">2.</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Uniformly sample from line segment:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_random</span><span class="p">([(</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">)],</span> <span class="n">n_candidates</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">... </span>
<span class="go">array([[ 0.33371234,  1.52775115,  1.51805039,  0.32079371,  0.75478597]])</span>
</pre></div>
</div>
<p>Uniformly sample from hyperrectangle:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">candidate_start_points_random</span><span class="p">([(</span><span class="o">-</span><span class="mf">10.</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">),</span> <span class="p">(</span><span class="mf">5.</span><span class="p">,</span> <span class="mf">7.</span><span class="p">),</span>
<span class="gp">... </span><span class="p">(</span><span class="mf">2.71</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">)],</span> <span class="n">n_candidates</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> 
<span class="go">array([[-8.65860645, -6.83830936, -6.66424853, -7.92209109, -8.87889632],</span>
<span class="go">       [ 0.54385109,  0.63564042,  1.43670096, -0.56410552, -0.61085342],</span>
<span class="go">       [ 5.34469192,  6.8235269 ,  6.74123457,  5.26933478,  6.07431495],</span>
<span class="go">       [ 2.89553972,  3.11428126,  2.95325045,  2.95371842,  2.81686667]])</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="regression.html"
                        title="previous chapter">Regression</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="utils.html"
                        title="next chapter">Utilities</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="utils.html" title="Utilities"
             >next</a> |</li>
        <li class="right" >
          <a href="regression.html" title="Regression"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyalacarte 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Daniel Steinberg, Louis Tiao, Lachlan McCalman, Alistair Reid.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>